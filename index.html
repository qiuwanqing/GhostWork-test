<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ghost Work+opening</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-sky: #e0e3ec;
      --window-bg: #ffffff;
      --paper: #fdfcf7;
      --text-main: #111;
      --text-muted: #777;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      background: url("./DS3image/window-desktop4.png") no-repeat center center / cover;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: filter 0.35s ease;
    }

    /* é»˜è®¤ä¸»çª—å£éšè—ï¼Œæ‰“å®Œå¡ä¹‹åå†å‡ºç° */
    .window {
      width: 360px;
      height: 560px;
      background: var(--window-bg);
      border-radius: 10px;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.35),
        0 0 0 1px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      resize: both;
      min-width: 280px;
      min-height: 360px;
      transition: transform 0.25s ease, filter 0.35s ease, opacity 0.4s ease;
      opacity: 0;
      pointer-events: none;
    }
    body.shift-started .window {
      opacity: 1;
      pointer-events: auto;
    }

    .window-header {
      height: 40px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.576);
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, #fdfdfd, #ececf0);
    }

    .traffic-lights {
      display: flex;
      gap: 6px;
      margin-right: 10px;
    }
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.15);
    }
    .dot.red { background:#ff5f57; }
    .dot.yellow { background:#febc2e; }
    .dot.green { background:#28c840; }

    .address-bar {
      flex: 1;
      height: 20px;
      border-radius: 6px;
      background: #ffffff;
      border: 1px solid rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      padding: 0 8px;
      font-size: 11px;
      color: #414141;
    }

    .window-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 0 20px 14px;
      gap: 14px;
      background: #ffffff;
      overflow: hidden;
    }

    .strip-viewport {
      flex: 1;
      border-radius: 7px;
      background: transparent;
      overflow: hidden;
      position: relative;
    }

    .paper-strip {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 0;
      background: var(--paper);
      border-radius: 10px;
      box-shadow:
        0 14px 24px rgba(0,0,0,0.45),
        0 0 0 1px rgba(0,0,0,0.9);
      overflow: hidden;
      transition: filter 0.3s ease;
    }

    .paper-content {
      position: relative;
      width: 100%;
      padding-top: 8px;
      padding-bottom: 40px;
    }

    .fact-item {
      position: absolute;
      left: 8px;
      right: 8px;
      display: grid;
      place-items: center;
      text-align: center;
      pointer-events: none;
    }

    .fact-text {
      font-size: 10px;
      line-height: 1.45;
      color: #000000;
      border-radius: 6px;
      padding: 6px 8px;
      background: rgba(255,255,255,0.8);
    }

    .controls-row {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .stats {
      line-height: 1.6;
    }
    .stats .value {
      font-weight: 700;
      color: #000;
    }

    #clickButton {
      appearance: none;
      border-radius: 8px;
      border: 1px solid rgb(0, 0, 0);
      padding: 6px 10px;
      background: #ffffff;
      color: #000000;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: filter 0.2s ease, opacity 0.2s ease;
    }
    #clickButton:hover { filter: brightness(1.05); }
    #clickButton:disabled {
      cursor: default;
      opacity: 0.5;
      filter: none;
    }

    /* ---------- æ‰“å¡æœºå¼€åœº ---------- */

    .start-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 6000;
      opacity: 1;
      transition: opacity 0.4s ease;
    }
    .start-overlay.is-hidden {
      opacity: 0;
      pointer-events: none;
    }

    .intro-stage {
      position: relative;
      width: min(460px, 80vw);
      height: min(620px, 120vh);
    }

    .intro-machine-back,
    .intro-machine-front {
      position: absolute;
      left: 50%;
      transform: translateX(-50%) scale(2);
      transform-origin: center bottom;
      width: 100%;
      max-width: 500px;
      bottom: 0.07%;
      filter: drop-shadow(0 14px 30px rgba(0,0,0,0.35));
      transition: transform 0.25s ease; 
    }
    .intro-machine-back { z-index: 1; opacity: 0.9; }
    .intro-machine-front { z-index: 3; }

    .intro-card {
      position: fixed;
      width: 70vw;
      max-width: 700px;
      min-width: 120px;
      cursor: grab;
      z-index: 4;
      filter: drop-shadow(0 12px 20px rgba(0,0,0,0.35));
      user-select: none;
      -webkit-user-drag: none;
      transition: transform 0.15s ease, left 0.2s ease-out, top 0.2s ease-out;
    }

    body.intro-zoom .intro-machine-back,
    body.intro-zoom .intro-machine-front {
    transform: translateX(-50%) scale(2.25);  /* æ¯”åŸæ¥ç•¥å¤§ä¸€ç‚¹ */
    }

    body.intro-zoom .intro-card {
    /* å¡ç‰‡ä¹Ÿè½»å¾®æ”¾å¤§ã€æä¸€ç‚¹é«˜åº¦ï¼Œçœ‹èµ·æ¥æ›´â€œè¢«å¸è¿›æœºå™¨â€ */
    transform: translateY(-8px) scale(1.03);
    }

    .intro-card:active {
      cursor: grabbing;
      transform: scale(1.02);
    }

    .intro-hint {
      position: absolute;
      bottom: 0.005%;
      width: 100%;
      text-align: center;
      font-size: 12px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #ff0000;
      text-shadow: 0 0 10px rgb(0, 0, 0);
    }

    @keyframes card-bounce-in {
      0%   { transform: translateY(0); }
      40%  { transform: translateY(60px); }
      70%  { transform: translateY(-30px); }
      100% { transform: translateY(0); }
    }

    /* ---------- Idle é®ç½© ---------- */
    .idle-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
      z-index: 5000;
    }
    .idle-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .idle-inner {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #ff0000;
      font-family: inherit;
      padding: 0;
      flex-direction: column;
      gap: 8px;
    }

    .idle-timer {
      font-size: 20vmax;
      line-height: 1;
      margin: 0;
      font-weight: 700;
      letter-spacing: 0.12em;
      white-space: nowrap;
      transform-origin: center center;
      transform: none;
    }

    .idle-label {
      position: absolute;
      left: 50%;
      bottom: 7vh;
      transform: translateX(-50%);
      width: 80%;
      text-align: center;
      font-size: 14px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .idle-inner p {
      position: absolute;
      left: 50%;
      bottom: 3vh;
      transform: translateX(-50%);
      width: 80%;
      text-align: center;
      font-size: 11px;
      line-height: 1.4;
      opacity: 0.9;
    }
    /* History è§†å›¾é‡Œé«˜äº®æ¯ä¸€æ¡æ ‡é¢˜ */
    .history-highlight {
    display: block;
    text-align: center;
    font-weight: 700;
    margin: 1.5em 0 0.5em; /* å’Œä¸Šä¸€æ¡ä¹‹é—´æ‹‰å‡ºè·ç¦»ï¼Œç›¸å½“äºä½ è¯´çš„â€œä¸¤ä¸ªæ®µå‰å›è¡Œâ€ */
    }

    /* ---------- å°çª—ï¼ˆç½šæ¬¾ + æ–°é—»ï¼‰ ---------- */
    .penalty-window {
      position: absolute;
      top: 50%;
      left: 50%;
      background: var(--window-bg);
      border-radius: 8px;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.55),
        0 0 0 1px rgba(0,0,0,0.3);
      max-width: 95vw;
      font-size: 12px;
      color: #111;
      overflow: hidden;
      z-index: 2000;
      display: inline-flex;
      flex-direction: column;
      cursor: default;
      font-family: Menlo, ui-monospace, SFMono-Regular, Monaco, Consolas, "Courier New", monospace;
    }
    .penalty-template,
    .news-template {
      display: none;
    }

    .penalty-header {
      height: 35px;
      display: flex;
      align-items: center;
      padding: 0 10px;
      border-bottom: 1px solid rgb(0, 0, 0);
      background: linear-gradient(to bottom, #fdfdfd, #ececf0);
      cursor: move;
    }
    .penalty-header .traffic-lights {
      gap: 6px;
      margin-right: 10px;
    }
    .penalty-title {
      font-size: 11px;
      color: #3c3c3c;
    }

    .penalty-body {
  padding: 3px 5px 5px;
  line-height: 1.2;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  height: auto; /* è®©é«˜åº¦è·Ÿå†…å®¹èµ° */
}

  /* ç½šæ¬¾æç¤ºï¼šçº¢åº•+è“è‰²ç­‰å®½å­—ï¼Œæ’ç‰ˆåƒä½ æˆªå›¾é‚£ç§ */
  .penalty-body--fine {
    background: #ff0000;
    color: #0000ff;
    font-weight: 800;
    font-family: 'Source Code Variable', ui-monospace, SFMono-Regular,
                Menlo, Monaco, Consolas, "Courier New", monospace;
    font-size: 14px;
  }

  /* æ–‡å­—ï¼šä¸‰è¡Œç´§å‡‘æ’ç‰ˆ */
  .penalty-body--fine p {
    margin: 0;
    white-space: pre-line; /* ä¿ç•™æ¢è¡Œ */
  }

  /* æŒ‰é’®æ ·å¼æ”¹æˆå°è“å­—çš„ç³»ç»ŸæŒ‰é’® */
  .penalty-body--fine .penalty-ok {
    margin-top: 4px;
    align-self: flex-start;
    border-radius: 4px;
    border: 1px solid rgba(0,0,255,0.6);
    background: #ffffff;
    color: #0000ff;
    font-size: 11px;
    padding: 3px 8px;
  }


    .penalty-body--news {
      background: #ffffff;
      color: #111;
      padding: 0;
    }

    .penalty-body p {
      margin: 2px 0;
      font-size: 15px;
    }

    .penalty-ok {
      appearance: none;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,0.4);
      padding: 4px 10px;
      background: #ffffff;
      color: #0000ff;
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
    }
    .penalty-ok:hover {
      filter: brightness(0.95);
    }

    .news-image {
      width: 100%;
      display: block;
      margin-bottom: 0;
      border-radius: 0;
      object-fit: cover;
      max-height: 260px;
    }
    .news-headline {
      font-size: 11px;
      font-weight: 700;
      padding: 6px 10px 0;
    }
    .news-snippet {
      font-size: 10px;
      padding: 0 10px 4px;
    }
    .news-link {
      font-size: 10px;
      text-decoration: underline;
      color: #0066cc;
      padding: 0 10px 8px;
      display: inline-block;
    }

    /* ---------- Distortion & Breakdownï¼ˆç–²æƒ« & å´©æºƒï¼‰ ---------- */

    /* é˜¶æ®µ 1ï¼šåªè®©ä¸­é—´ strip å…ˆæ¨¡ç³Šï¼ˆçœ¼ç›ç›¯ç€ä¸­é—´ç´¯ï¼‰ */
    body.distorted .strip-viewport {
    filter: blur(1.2px) contrast(0.96) grayscale(0.05);
    }
    body.distorted .fact-text {
    font-size: 9px;
    opacity: 0.85;
    letter-spacing: 0.04em;
    }
    body.distorted .stats .value {
    color: #444;
    }
    body.distorted #clickButton {
    background: #222;
    border-color: rgba(0,0,0,0.3);
    }

    /* é˜¶æ®µ 2ï¼šæ¨¡ç³Šâ€œæ‰©æ•£â€åˆ°æ•´å— window-body & header */
    body.distorted-full .window-body {
    filter: blur(1.4px) contrast(0.94) grayscale(0.12);
    }
    body.distorted-full .window-header {
    filter: blur(0.8px);
    }

    /* Breakdownï¼šä¸å†æ•´å—æŠ–ï¼Œåªè®©æ–‡å­— / è¡Œå—æ‰­æ›² */

    /* 1ï¼‰æ•´æ®µäº‹å®å—å·¦å³è½»å¾®æ¼‚ç§»ï¼ˆé”™å±‚æ„Ÿï¼‰ */
    @keyframes band-drift-left {
    0%   { transform: translateX(0); }
    50%  { transform: translateX(-1.5px); }
    100% { transform: translateX(0.5px); }
    }
    @keyframes band-drift-right {
    0%   { transform: translateX(0); }
    50%  { transform: translateX(1.5px); }
    100% { transform: translateX(-0.5px); }
    }

    /* 2ï¼‰æ–‡å­—æœ¬èº«çš„ wobbleï¼šæ°´å¹³æŠ– + å­—è·ä¸€ä¼šå„¿æ‹‰å¼€ä¸€ä¼šå„¿æŒ¤åœ¨ä¸€èµ· */
    @keyframes text-smear {
    0% {
        transform: translateX(0);
        letter-spacing: 0.02em;
        text-shadow: none;
    }
    25% {
        transform: translateX(-0.6px);
        letter-spacing: 0.08em;
        text-shadow: -1px 0 0 rgba(0,0,0,0.7);
    }
    50% {
        transform: translateX(0.8px);
        letter-spacing: -0.02em;
        text-shadow: 1px 0 0 rgba(0,0,0,0.5);
    }
    75% {
        transform: translateX(-0.3px);
        letter-spacing: 0.04em;
        text-shadow: -0.5px 0 0 rgba(0,0,0,0.6);
    }
    100% {
        transform: translateX(0);
        letter-spacing: 0.02em;
        text-shadow: none;
    }
    }

    /* 3ï¼‰stats è½»è½»â€œæ¼‚æµ®â€ï¼Œæœ‰ç‚¹çœ‹ä¸ç¨³æ•°æ®çš„æ„Ÿè§‰ */
    @keyframes stats-float {
    0%   { transform: translateX(0); opacity: 1;   }
    40%  { transform: translateX(1px); opacity: .9; }
    70%  { transform: translateX(-1px); opacity: .95; }
    100% { transform: translateX(0); opacity: 1;   }
    }

    /* åº”ç”¨åˆ°äº‹å®å—çš„è¡Œå®¹å™¨ï¼ˆé”™å±‚æ¼‚ç§»ï¼‰ */
    body.breakdown .fact-item:nth-child(odd) {
    animation: band-drift-left 0.7s infinite alternate ease-in-out;
    }
    body.breakdown .fact-item:nth-child(even) {
    animation: band-drift-right 0.8s infinite alternate ease-in-out;
    }

    /* å…·ä½“æ–‡å­—çš„ smear */
    body.breakdown .fact-text {
    animation: text-smear 0.26s infinite alternate;
    }

    /* stats ä¹Ÿè·Ÿç€ä¸€èµ·â€œè™šæ‰â€ */
    body.breakdown .stats {
    animation: stats-float 0.7s infinite alternate;
    }

    /* æ•´æ¡çº¸å¸¦ç¨å¾®è¿‡å¯¹æ¯”ä¸€ç‚¹ï¼Œè®©å™ªç‚¹/çº¹ç†é¡¶å‡ºæ¥ */
    body.breakdown .paper-strip {
    filter: contrast(1.25) saturate(1.08);
    }

    /* æ·±åº¦ breakdownï¼šå¥—ä¸Šä¸€ä¸ªâ€œæ°´æ³¢ / å¢¨æ™•â€ä½ç§»æ»¤é•œï¼Œæ•ˆæœæ›´ç‹ ä¸€ç‚¹ */
    body.breakdown-deep .strip-viewport {
    filter: url(#ink-distort) blur(0.4px) contrast(1.1);
    }
    body.breakdown-deep .fact-text {
    animation-duration: 0.18s;   /* æ›´æ€¥èº */
    }



    /* ====== æ›¿æ¢åçš„ final-overlay / final-window / final-ticket æ ·å¼ï¼ˆmac çª—å£æ ·å¼ + ç¥¨æ®ï¼‰ ====== */
    .final-overlay {
      position: fixed;
      inset: 0;
      display: none;            /* ç”± JS æ§åˆ¶æ˜¾ç¤º */
      align-items: center;
      justify-content: center;
      z-index: 6500;
      background: rgba(0,0,0,0.38);
    }


    .final-window {
      /* å®½åº¦ç”±å†…å®¹å†³å®šï¼Œä¸Šé™ 90vw */
      width: auto;
      max-width: 90vw;

      /* é«˜åº¦ä»æ¯”è¾ƒå°å¼€å§‹ï¼Œåé¢ç”¨ JS ä¸€ç‚¹ç‚¹å¢é«˜ */
      height: 220px;
      max-height: 80vh;
      transition: height 0.25s ease;

      border-radius: 12px;
      background: var(--window-bg);
      box-shadow:
        0 26px 60px rgba(0,0,0,0.7),
        0 0 0 1px rgba(0,0,0,0.5);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      font-family: 'Source Code Variable', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
    }


    .final-ticket {
      flex: 1; 
      padding: 18px;
      background: #2cfd30; /* æŒ‡å®šç»¿è‰²èƒŒæ™¯ */
      color: #0000ff;     /* æŒ‡å®šå­—ä½“è“è‰² */
      /* è®©ç¥¨æ®ä¸å†å¼ºè¡Œ 420px èµ·æ­¥ï¼Œè€Œæ˜¯éšå†…å®¹å˜åŒ– */
      max-height: 78vh;
      overflow: auto;
      font-size: 12px;
      line-height: 1.25;
      letter-spacing: 0.02em;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .final-ticket pre {
      margin: 0;
      /* å…è®¸è‡ªåŠ¨æ¢è¡Œï¼Œè¿™æ ·çª—å£å°±ä¸ä¼šè¢«æœ€é•¿ä¸€è¡Œç¡¬æ’‘åˆ°å¾ˆå®½ */
      white-space: pre-wrap;
      word-break: break-word;

      font-family: 'Source Code Variable', ui-monospace, Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size: 12px;
      color: #0000ff;
      background: transparent;
    }
    
    /* æ•´å¼ ç¥¨æ®å†…éƒ¨ï¼šä¸Šä¸‹å¸ƒå±€ï¼Œä¸Šé¢æ˜¯æ–‡å­—ï¼Œä¸‹é¢æ˜¯æ¡ç  */
    .final-ticket-inner {
    display: flex;
    flex-direction: column;
    justify-content: space-between;  /* æ‹‰å¼€ï¼Œä¸Šä¸‹æ’‘æ»¡ï¼Œæ¡ç è´´åˆ°åº• */
    width: 100%;
    max-width: 520px;                /* ç¥¨æ®æœ¬èº«çš„å®½åº¦ä¸Šé™ */
    height: 100%;
    }

    /* æ¡ç åŒºåŸŸï¼šé»˜è®¤æ˜¾ç¤ºä¸ºåˆ—æ–¹å‘ï¼Œå±…ä¸­å¯¹é½ */
    .final-ticket-barcode {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 16px;     /* å’Œä¸Šé¢çš„æ–‡å­—æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
    margin-bottom: 10px;  /* ç¦»åº•è¾¹ä¸€ç‚¹ç‚¹ç•™ç™½ */
    }

    /* æ¡ç å›¾ç‰‡æœ¬ä½“ */
    .receipt-barcode {
    width: 260px;         /* å¯ä»¥æŒ‰ä½ æˆªå›¾è°ƒ 220â€“280 ä¹‹é—´ */
    max-width: 80%;
    height: auto;
    }

    /* æ¡ç ä¸‹é¢é‚£è¡Œæ•°å­— */
    .barcode-number {
    margin-top: 10px;
    font-size: 14px;
    letter-spacing: 0.12em;
    }

    /* â€œVIEW EVERY CLICKâ€ æ–‡æ¡ˆ */
    .barcode-caption {
    margin-top: 26px;
    font-size: 12px;
    letter-spacing: 0.16em;
    }

     
   /* æ”¾åœ¨ final æ ·å¼é‚£å—ï¼Œæ›¿æ¢åŸæ¥çš„ final-traffic-lights / final-address-bar å®šä¹‰ */

.final-window-header {
  height: 40px;
  display: flex;
  align-items: center;
  padding: 0 12px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.576);
  background: linear-gradient(to bottom, #fdfdfd, #ececf0);
  gap: 10px;            /* å’Œä¸»çª—å£ä¸€æ ·ç•™ä¸€ç‚¹é—´è· */
}

.final-traffic-lights {
  display: flex;
  gap: 6px;
  margin-right: 6px;    /* ç»™ç¯å’Œåœ°å€æ ä¹‹é—´ä¸€ç‚¹å‘¼å¸ */
}

.final-traffic-lights .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  border: 1px solid rgba(0,0,0,0.15);
}
.final-traffic-lights .dot.red    { background:#ff5f57; }
.final-traffic-lights .dot.yellow { background:#febc2e; }
.final-traffic-lights .dot.green  { background:#28c840; }

/* è¿™é‡Œé‡ç‚¹ï¼šä¸è¦å† flex:1 æ’‘æ»¡æ•´è¡Œï¼Œè€Œæ˜¯ç»™ä¸€ä¸ªâ€œä¸Šé™å®½åº¦â€ */
.final-address-bar {
  flex: 0 1 260px;      /* å¤§æ¦‚ä¸€å—çŸ­åœ°å€æ ï¼Œæ ¹æ®éœ€è¦è°ƒæˆ 220/280 éƒ½è¡Œ */
  height: 20px;
  border-radius: 6px;
  background: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  padding: 0 8px;
  font-size: 11px;
  color: #414141;
}
.final-window-header {
  height: 40px;
  display: flex;
  align-items: center;
  padding: 0 12px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.576);
  background: linear-gradient(to bottom, #fdfdfd, #ececf0);
  gap: 10px;
}

/* å³ä¾§èœå•æ•´ä½“æ˜¯ä¸€ä¸ªç›¸å¯¹å®šä½å®¹å™¨ */
.final-menu {
  margin-left: 6px;
  position: relative;
}

/* åœ†å½¢ â‹¯ æŒ‰é’® */
.final-menu-button {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid rgba(0,0,0,0.25);
  background: #f5f5f7;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  color: #555;
}

.final-menu-button:hover {
  background: #e5e5ea;
}

/* ä¸‹æ‹‰èœå• */
.final-menu-dropdown {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 160px;
  padding: 4px 0;
  border-radius: 8px;
  background: #ffffff;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.35),
    0 0 0 1px rgba(0,0,0,0.12);
  display: none;
  z-index: 20;
}

.final-menu-dropdown.is-open {
  display: block;
}

.final-menu-dropdown button {
  width: 100%;
  padding: 6px 12px;
  border: none;
  background: transparent;
  text-align: left;
  font-size: 11px;
  color: #111;
  cursor: pointer;
  white-space: nowrap;
}

.final-menu-dropdown button:hover {
  background: #f0f0f5;
}



    .final-title {
      font-size: 11px;
      color: rgba(0,0,0,0.6);
      font-weight: 600;
    }

    @media (max-width: 420px) {
      .final-ticket pre { font-size: 10px; }
    }

    .final-actions {
    margin-top: 12px;
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    }

    .final-actions button {
    appearance: none;
    border-radius: 6px;
    border: 1px solid rgba(0,0,0,0.6);
    padding: 4px 10px;
    background: #ffffff;
    color: #0000ff;
    font-size: 10px;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    }

    .final-actions button:hover {
    filter: brightness(0.95);
    }

    /* ---------- Final æ—§å®šä¹‰ç»“æŸ ---------- */
  </style>
</head>
<body>
    <!-- æ‰“å¡éŸ³æ•ˆ -->
  <audio id="punchSound" src="./DS3image/punch-sound2.mp3" preload="auto"></audio>
    <!-- æ‰“å°ç¥¨éŸ³æ•ˆï¼ˆæ‰“å°receiptçš„æ—¶å€™ç”¨ï¼‰ -->
  <audio id="receiptSound" src="./DS3image/receipt-print.mp3" preload="auto"></audio>


  <!-- æ‰“å¡æœºå¼€åœº -->
  <div class="start-overlay" id="startOverlay">
    <div class="intro-stage" id="introStage">
      <img src="./DS3image/punch-machine.png" class="intro-machine-back" id="machineBack" alt="punch machine back">
      <img src="./DS3image/punch-machine.png" class="intro-machine-front" id="machineFront" alt="punch machine front">
      <img src="./DS3image/punch-card.png" class="intro-card" id="punchCard" alt="time card">
      <div class="intro-hint">DRAG THE TIME CARD TO CLOCK IN</div>
    </div>
  </div>

  <!-- Idle é»‘å¹• + å€’è®¡æ—¶ -->
  <div class="idle-overlay" id="idleOverlay">
    <div class="idle-inner">
      <div class="idle-timer" id="idleCountdown">05:00:00</div>
      <div class="idle-label">PAY CUT ING</div>
      <p>Please resume clicking. Idle time will be reported to your supervisor for pay deduction.</p>
    </div>
  </div>

  <!-- ç½šæ¬¾æç¤ºå°çª—å£æ¨¡æ¿ -->
  <div class="penalty-template penalty-window" id="penaltyTemplate">
    <div class="penalty-header">
      <div class="traffic-lights">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
      </div>
      <div class="penalty-title">pay notice</div>
    </div>
    <div class="penalty-body penalty-body--fine">
      <p>Idle time has been 
        reported.
        $0.13 will be deducted 
        from your current hour.
      </p>
      <button class="penalty-ok">Wage Deduction Notice</button>
    </div>
  </div>

  <!-- News å°çª—å£æ¨¡æ¿ -->
  <div class="news-template penalty-window" id="newsTemplate">
    <div class="penalty-header">
      <div class="traffic-lights">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
      </div>
      <div class="penalty-title">NEWS</div>
    </div>
    <div class="penalty-body penalty-body--news">
      <img class="news-image" src="" alt="case image">
      <p class="news-headline"><strong></strong></p>
      <p class="news-snippet"></p>
      <p><a class="news-link" href="#" target="_blank">Open article</a></p>
    </div>
  </div>

  <!-- Final report ç»“ç®—å¹•ï¼ˆå·²æ›¿æ¢ä¸º mac é£æ ¼çª—å£ä¸ç¥¨æ®ï¼‰ -->
  <div class="final-overlay" id="finalOverlay">
    <div class="final-window" role="dialog" aria-modal="true" aria-labelledby="finalReceiptTitle">   
       
        <div class="final-window-header">
        <div class="final-traffic-lights" aria-hidden="true">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
        </div>

        <div class="final-address-bar">
            <span id="finalReceiptTitle" class="final-title">
            Receipt
            </span>
        </div>

        <!-- åƒæµè§ˆå™¨å³ä¸Šè§’ â‹¯ çš„èœå• -->
        <div class="final-menu">
            <button
            id="finalMenuButton"
            class="final-menu-button"
            aria-haspopup="true"
            aria-expanded="false"
            title="More"
            type="button"
            >
            â‹¯
            </button>
            <div
            id="finalMenuDropdown"
            class="final-menu-dropdown"
            role="menu"
            >
            <button type="button" data-action="newShift"   role="menuitem">
                Start New Shift
            </button>
            <button type="button" data-action="history"    role="menuitem">
                View History
            </button>
            </div>
        </div>
        </div>

      
<div class="final-ticket">
  <div class="final-ticket-inner">
    <!-- ä¸ŠåŠéƒ¨åˆ†ï¼šæ–‡æœ¬æ”¶æ®å†…å®¹ -->
    <pre id="finalTicketText">
========================================
RECEIVED   
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Worker ID: 0429-7561-KN
Session: 08:00â€“12:00

Items Reviewed: 24,382
Clicks Logged: 3,104
Key Travel: 310.4 mm
Idle Time: 00:14:32
Deductions Applied: $0.37

Emotional Exposure: HIGH
Trauma Index: 0.73

Payment Issued: $3.18
Status: BELOW TARGET
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

This receipt confirms the collection of 
unseen human labor required by AI systems.
Every click counts.
========================================
    </pre>

    <!-- ä¸‹åŠéƒ¨åˆ†ï¼šæ¡ç åŒºï¼Œåªåœ¨â€œå•å¼ æ”¶æ®â€æ¨¡å¼æ˜¾ç¤º -->
    <div class="final-ticket-barcode">
      <img
        src="./DS3image/receipt-barcode.png"
        alt="Transaction barcode"
        class="receipt-barcode"
      >
      <div class="barcode-number">010271400000000000</div>
      <div class="barcode-caption">VIEW EVERY CLICK</div>
    </div>
  </div>
</div>
  </div>
</div>


  <!-- ä¸»çª—å£ -->
  <div class="window" id="mainWindow">
    <div class="window-header">
      <div class="traffic-lights">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
      </div>
      <div class="address-bar">
        ghostwork/view every click
      </div>
    </div>

    <div class="window-body">
      <div class="strip-viewport">
        <div class="paper-strip" id="paperStrip">
          <div class="paper-content" id="paperContent"></div>
        </div>
      </div>

      <div class="controls-row">
        <div class="stats">
          CLICKS
          <span id="clickCount" class="value">0</span>
        </div>
        <button id="clickButton" disabled>Click to add 0.1 mm</button>
      </div>
    </div>
  </div>

  <script>
    /* ------------------ çº¸å¸¦é€»è¾‘ ------------------ */
    const mmPerClick = 0.5;
    const pxPerMm = 6;

    let clickCount = 0;
    const paperStrip   = document.getElementById('paperStrip');
    const paperContent = document.getElementById('paperContent');
    const clickCountEl = document.getElementById('clickCount');
    const heightMmEl   = document.getElementById('heightMm'); // æ²¡æœ‰å±•ç¤ºçš„é«˜åº¦æ–‡æœ¬å¯ä»¥å¿½ç•¥
    const mainWindow   = document.getElementById('mainWindow');

    const TASK_TOTAL_CLICKS       = 210;
    const DISTORTION_CLICKS       = 100;
    const BREAKDOWN_OFFSET_CLICKS = 2;
    const DISTORTION_DELAY_MS     = 3;
    const PAY_PER_CLICK           = 0.0003;
    const DEDUCTION_PER_PENALTY   = 0.13;   // æ¯ä¸ªç½šæ¬¾å¼¹çª—æ‰£å¤šå°‘é’±ï¼ˆå’Œå°çª—é‡Œæ–‡æ¡ˆå¯¹åº”ï¼‰

    const TAPE_TOTAL_CLICKS       = TASK_TOTAL_CLICKS;

    let isDistorted       = false;
    let breakdownStarted  = false;
    let taskCompleted     = false;
    

    const facts = [
  { clicksPos: 1770,   text: 'At shift end the platform logged throughput metrics â€” but many workers found their individual pay adjusted downward.' },
  { clicksPos: 1800,   text: 'Investigations and court filings exposed systemic issues: withheld pay, sudden layoffs, and broken promises.' },
  { clicksPos: 1830,  text: 'Some workers have filed lawsuits or complaints about unfair dismissal, unpaid wages, and traumatic workloads.' },
  { clicksPos:1860,  text: 'Low pay yet heavy exposure to graphic content led many to suffer severe emotional and psychological distress.' },
  { clicksPos:1890,  text: 'Moderators say speed was the priority â€” fast judgments with little context for what they were reviewing.' },
  { clicksPos: 1920,  text: 'Despite claims of â€œautomation,â€ major platforms still rely on third-party contractors and human moderators.' },
  { clicksPos: 1950,  text: 'Hundreds or thousands of items â€” text, images, video â€” had to be reviewed every shift under tight time pressure.' },
  { clicksPos: 1980, text: 'Shifts ran day and night, rotating across time zones â€” many moderators worked long, irregular hours.' },
  { clicksPos: 2010, text: 'If your mouse stopped â€” even for a bathroom break â€” the clock kept running; idle time could trigger deductions.' },
  { clicksPos: 2040, text: 'Some content-moderators in Kenya reported sifting through hundreds of violent or graphic posts each day for <$2/hr.' },
  { clicksPos: 2070, text: 'Even brief pauses were treated as â€œidle timeâ€ â€” some had pay docked for a few secondsâ€™ inactivity.' },
  { clicksPos: 2100, text: 'Workers say they were pushed to click ~25 items per minute to meet platform quotas.' }
];


    function mmToPx(mm) { return mm * pxPerMm; }

    //ç»™ Items / Clicks åŠ åƒåˆ†ä½
    function formatNumber(num) {
        return num.toLocaleString('en-US');
    }

    let tapeLengthPx = 0;
    let baseOffsetPx = 0;

    function recalcBaseOffset() {
      const edgeVisiblePx = 16;
      baseOffsetPx = -tapeLengthPx + edgeVisiblePx;
    }

    function initFacts() {
      facts.forEach(f => {
        const wrapper = document.createElement('div');
        wrapper.className = 'fact-item';

        const inner = document.createElement('div');
        inner.className = 'fact-text';
        inner.textContent = f.text;

        wrapper.appendChild(inner);
        paperContent.appendChild(wrapper);

        const posMm = f.clicksPos * mmPerClick;
        const posPx = mmToPx(posMm);
        wrapper.style.top = (8 + posPx) + 'px';

        f.el = wrapper;
      });

      const tapeTotalMm = TAPE_TOTAL_CLICKS * mmPerClick;
      const maxFactMm =
        facts.length > 0
          ? Math.max(...facts.map(f => f.clicksPos * mmPerClick)) + 20
          : 0;

      const finalMm = Math.max(tapeTotalMm, maxFactMm);
      tapeLengthPx = mmToPx(finalMm);
      paperStrip.style.height = tapeLengthPx + 'px';

      recalcBaseOffset();
      paperStrip.style.transform = `translate(-50%, ${baseOffsetPx}px)`;
    }

    function initRulers() {
      const rulerEveryMm = 100;
      const maxMm = tapeLengthPx / pxPerMm;
      const count = Math.floor(maxMm / rulerEveryMm);

      for (let i = 0; i < count; i++) {
        const line = document.createElement('div');
        line.className = 'ruler-line';
        line.style.top = (i + 1) * mmToPx(rulerEveryMm) + 'px';
        paperContent.appendChild(line);
      }
    }

    function updateStrip() {
      const totalMm  = clickCount * mmPerClick;
      const travelPx = mmToPx(totalMm);
      const offset   = baseOffsetPx + travelPx;

      paperStrip.style.transform = `translate(-50%, ${offset}px)`;
      clickCountEl.textContent  = clickCount;
      if (heightMmEl) {
        heightMmEl.textContent = totalMm.toFixed(1) + ' mm';
      }
    }

    /* ------------------ Idle + ç½šæ¬¾ + News ------------------ */
    const idleOverlay   = document.getElementById('idleOverlay');
    const idleCountdown = document.getElementById('idleCountdown');
    const penaltyTemplate = document.getElementById('penaltyTemplate');
    const newsTemplate    = document.getElementById('newsTemplate');

    const IDLE_THRESHOLD_MS = 5000;
    const WARNING_MS        = 5000;

    let lastActiveTime     = Date.now();
    let idleCountdownTimer = null;
    let idleCheckTimer     = null;
    let penaltyCount       = 0;
    let hasStarted         = false;

    let totalIdleMs        = 0;    // ç´¯ç§¯çš„å‘å‘†æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    let idleStartMs        = null; // å½“å‰è¿™ä¸€è½®å‘å‘†å¼€å§‹çš„æ—¶é—´æˆ³

    let newsOpened = 0;

    // ---- Shift historyï¼ˆç”¨ localStorage ä¿å­˜æ¯ä¸€ç­çš„ç¥¨æ®ï¼‰----
    let shiftHistory = [];

    try {
    const saved = localStorage.getItem('gwShiftHistory');
    if (saved) {
        shiftHistory = JSON.parse(saved);
    }
    } catch (e) {
    shiftHistory = [];
    }

    function saveReceiptToHistory(ticketText) {
        const entry = {
            ticket: ticketText,
            time: new Date().toISOString(),
        };
        shiftHistory.push(entry);
        try {
            localStorage.setItem('gwShiftHistory', JSON.stringify(shiftHistory));
        } catch (e) {
            // è¶…å‡º localStorage å®¹é‡çš„è¯å°±ç®—äº†ï¼Œä¸å½±å“è¿è¡Œ
        }
    }


    const MAX_NEWS_WINDOWS = Infinity;
    let breakdownClicksSinceNews = 0;
    let breakdownClicksTotal = 0;

    function formatMsToSSMMTT(ms) {
      const totalMs = Math.max(0, Math.floor(ms));
      const seconds = Math.floor(totalMs / 1000);
      const millis  = totalMs % 1000;
      const tick    = Math.floor((totalMs % 1000) / 50);

      const pad2 = n => n.toString().padStart(2, '0');
      const pad3 = n => n.toString().padStart(3, '0');

      return `${pad2(seconds)}:${pad3(millis)}:${pad2(tick)}`;
    }

    // ğŸ‘‡ æ–°å¢ï¼šç¥¨æ®ç”¨çš„ã€ŒHH:MM:SSã€æ ¼å¼
    function formatMsToHHMMSS(ms) {
        const totalSec = Math.floor(ms / 1000);
        const h = Math.floor(totalSec / 3600);
        const m = Math.floor((totalSec % 3600) / 60);
        const s = totalSec % 60;

        const pad2 = n => n.toString().padStart(2, '0');
        return `${pad2(h)}:${pad2(m)}:${pad2(s)}`;
        }
    
        function fitIdleTimer() {
      if (!idleOverlay.classList.contains('visible')) return;
      const box   = idleOverlay.getBoundingClientRect();
      const timer = idleCountdown;

      timer.style.transform = 'none';
      const rect = timer.getBoundingClientRect();
      if (rect.width === 0 || rect.height === 0) return;

      const scaleX = box.width  / rect.width;
      const scaleY = box.height / rect.height;

      timer.style.transformOrigin = 'center center';
      timer.style.transform = `scale(${scaleX}, ${scaleY})`;
    }

    function showIdleOverlay() {
      if (idleOverlay.classList.contains('visible')) return;

      idleOverlay.classList.add('visible');
      idleStartMs = Date.now();   //  å¼€å§‹è®°è¿™ä¸€è½®å‘å‘†

      let remainingMs = WARNING_MS;
      idleCountdown.textContent = formatMsToSSMMTT(remainingMs);
      requestAnimationFrame(fitIdleTimer);

      idleCountdownTimer = setInterval(() => {
        remainingMs -= 50;
        if (remainingMs < 0) remainingMs = 0;

        idleCountdown.textContent = formatMsToSSMMTT(remainingMs);
        fitIdleTimer();

        if (!idleOverlay.classList.contains('visible')) {
          clearInterval(idleCountdownTimer);
          idleCountdownTimer = null;
          return;
        }

        if (remainingMs <= 0) {
          clearInterval(idleCountdownTimer);
          idleCountdownTimer = null;

          hideIdleOverlay();
          createPenaltyWindow();
          resetIdleTimer();
        }
      }, 50);
    }

    function hideIdleOverlay() {
    // å…ˆæŠŠæœ¬è½® idle åŠ è¿› totalIdleMs
        if (idleStartMs !== null) {
            totalIdleMs += Date.now() - idleStartMs;
            idleStartMs = null;
        }

        idleOverlay.classList.remove('visible');
        if (idleCountdownTimer) {
            clearInterval(idleCountdownTimer);
            idleCountdownTimer = null;
        }
    }


    function makeDraggable(winEl) {
      const handle = winEl.querySelector('.penalty-header') || winEl;
      let isDragging = false;
      let startX, startY, startLeft, startTop;

      function onMouseDown(e) {
        e.preventDefault();
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        const rect = winEl.getBoundingClientRect();
        startLeft = rect.left;
        startTop  = rect.top;

        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
      }

      function onMouseMove(e) {
        if (!isDragging) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        winEl.style.left = `${startLeft + dx}px`;
        winEl.style.top  = `${startTop + dy}px`;
      }

      function onMouseUp() {
        isDragging = false;
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
      }

      handle.addEventListener('mousedown', onMouseDown);
    }

 function createPenaltyWindow() {
  penaltyCount++;

  const clone = penaltyTemplate.cloneNode(true);
  clone.id = '';
  clone.classList.remove('penalty-template');
  clone.style.display = 'flex';
  clone.style.position = 'fixed';
  //clone.style.width = '320px'; // å›ºå®šä¸€ä¸ªå¤§è‡´å®½åº¦ï¼Œé«˜åº¦è®©å†…å®¹è‡ªå·±æ’‘

  const titleEl = clone.querySelector('.penalty-title');
  if (titleEl) {
    titleEl.textContent = `pay notice Â· #${penaltyCount}`;
  }

  const okBtn = clone.querySelector('.penalty-ok');
  if (okBtn) {
    okBtn.addEventListener('click', () => {
      clone.classList.add('penalty-archived');
    });
  }

  document.body.appendChild(clone);
  makeDraggable(clone);

  // ğŸ‘‰ å…ˆåŠ åˆ° DOMï¼Œå†æŒ‰è‡ªèº«å°ºå¯¸ç®—ä½ç½®ï¼Œè·Ÿä¸»çª—å£æ— å…³
  requestAnimationFrame(() => {
    const bodyW = window.innerWidth;
    const bodyH = window.innerHeight;
    const rect  = clone.getBoundingClientRect();

    const penaltyWidth  = rect.width;
    const penaltyHeight = rect.height;

    const overlap = 5 + Math.random() * 12;
    const side = Math.random() < 0.5 ? 'left' : 'right';

    const mainRect = mainWindow.getBoundingClientRect();

    let top;
    let left;

    const maxTopRange = Math.max(0, mainRect.height - penaltyHeight - 60);
    top = mainRect.top + 20 + Math.random() * maxTopRange;
    top = Math.max(20, Math.min(bodyH - penaltyHeight - 20, top));

    if (side === 'right') {
      left = mainRect.right - overlap;
    } else {
      left = mainRect.left - penaltyWidth + overlap;
    }

    left = Math.max(10, Math.min(bodyW - penaltyWidth - 10, left));

    clone.style.top  = `${top}px`;
    clone.style.left = `${left}px`;
  });
}


    const newsItems = [
      { image: './DS3image/news1.jpg', url: 'https://www.washingtonpost.com/world/2023/08/28/scale-ai-remotasks-philippines-artificial-intelligence/' },
      { image: './DS3image/news2.jpg', url: 'https://www.reuters.com/technology/content-moderator-kenya-sues-meta-over-working-conditions-2022-05-10/' },
      { image: './DS3image/news3.jpg', url: 'https://time.com/7293552/meta-scale-ai-workers/' },
      { image: './DS3image/news4.jpg', url: 'https://time.com/7293552/meta-scale-ai-workers/' },
      { image: './DS3image/news5.jpg', url: 'https://time.com/7293552/meta-scale-ai-workers/' },
      { image: './DS3image/news6.jpg', url: 'https://www.reuters.com/article/business/media-telecom/feature-ai-boom-is-dream-and-nightmare-for-workers-in-global-south-idUSL5N2XI2X8/' },
      { image: './DS3image/news7.png', url: 'https://www.theguardian.com/media/2024/dec/18/kenya-facebook-moderators-sue-after-diagnoses-of-severe-ptsd?utm_source=chatgpt.com' },
      { image: './DS3image/news8.png', url: 'https://www.theguardian.com/technology/2025/apr/27/meta-faces-ghana-lawsuits-over-impact-of-extreme-content-on-moderators?utm_source=chatgpt.com' },
      { image: './DS3image/news9.png', url: 'https://www.wired.com/2014/10/content-moderation/?utm_source=chatgpt.com' },
      { image: './DS3image/news10.png', url: 'https://www.cbsnews.com/news/ai-work-kenya-exploitation-60-minutes/?utm_source=chatgpt.com' },
      { image: './DS3image/news11.png', url: 'https://www.reuters.com/world/africa/kenya-court-rules-meta-can-be-sued-over-layoffs-by-contractor-2024-09-20/?utm_source=chatgpt.com' },
      { image: './DS3image/news12.png', url: 'https://www.theguardian.com/world/2024/dec/18/why-former-facebook-moderators-in-kenya-are-taking-legal-action?utm_source=chatgpt.com' },
      { image: './DS3image/news13.png', url: 'https://time.com/6247678/openai-chatgpt-kenya-workers/?utm_source=chatgpt.com' }
      
    ];

    function createNewsWindow() {
      if (!newsTemplate) return;
      if (newsOpened >= MAX_NEWS_WINDOWS) return;

      newsOpened++;

      const clone = newsTemplate.cloneNode(true);
      clone.id = '';
      clone.classList.remove('news-template');
      clone.style.display = 'flex';
      clone.style.position = 'fixed';

      const minW = 260;
      const maxW = Math.min(420, window.innerWidth - 40);
      const width = minW + Math.random() * (maxW - minW);
      clone.style.width = `${width}px`;

      const data = newsItems[Math.floor(Math.random() * newsItems.length)];

      const headlineEl = clone.querySelector('.news-headline');
      const snippetEl  = clone.querySelector('.news-snippet');
      const linkEl     = clone.querySelector('.news-link');
      const imgEl      = clone.querySelector('.news-image');

      if (headlineEl) headlineEl.textContent = data.headline || '';
      if (snippetEl)  snippetEl.textContent  = data.snippet  || '';
      if (linkEl)     linkEl.href = data.url;
      if (imgEl) {
        if (data.image) {
          imgEl.src = data.image;
          imgEl.style.display = 'block';
        } else {
          imgEl.style.display = 'none';
        }
      }

    document.body.appendChild(clone);

    requestAnimationFrame(() => {
        const bodyW = window.innerWidth;
        const bodyH = window.innerHeight;

        // å…ˆéšä¾¿ä¸¢ä¸€ä¸ªå¤§æ¦‚ä½ç½®
        let rect = clone.getBoundingClientRect();
        let maxLeft = Math.max(10, bodyW - rect.width - 10);
        let maxTop  = Math.max(10, bodyH - rect.height - 10);

        let left = 10 + Math.random() * (maxLeft - 10);
        let top  = 10 + Math.random() * (maxTop - 10);

        clone.style.left = `${left}px`;
        clone.style.top  = `${top}px`;

    // å†æ£€æŸ¥ä¸€æ¬¡ï¼šå¦‚æœæŒ¡ä½äº† Click æŒ‰é’®ï¼Œå°±å¾€ä¸ŠæŒª
    const btn = document.getElementById('clickButton');
    if (btn) {
        const btnRect = btn.getBoundingClientRect();
        rect = clone.getBoundingClientRect();

        const overlapsHoriz =
        rect.left < btnRect.right && rect.right > btnRect.left;
        const overlapsVert =
        rect.top < btnRect.bottom && rect.bottom > btnRect.top;

        if (overlapsHoriz && overlapsVert) {
        // æŠŠ news çª—å£æŒªåˆ°æŒ‰é’®ä¸Šæ–¹
        let newTop = btnRect.top - rect.height - 8;
        if (newTop < 10) newTop = 10;   // ä¸è¦è·‘å‡ºå±å¹•
        clone.style.top = `${newTop}px`;
        }
      }
    });

    makeDraggable(clone);

    }

    function resetIdleTimer() {
      if (!hasStarted || taskCompleted) return;
      lastActiveTime = Date.now();
      hideIdleOverlay();
    }

    ['click'].forEach(ev => {
      document.addEventListener(ev, resetIdleTimer, { passive: true });
    });

    idleCheckTimer = setInterval(() => {
      const now = Date.now();
      if (!hasStarted || taskCompleted) return;
      if (!idleOverlay.classList.contains('visible') &&
          now - lastActiveTime > IDLE_THRESHOLD_MS) {
        showIdleOverlay();
      }
    }, 1000);

    /* ---------- é˜¶æ®µæ§åˆ¶ & ç‚¹å‡» ---------- */
    function startDistortionEffects() {
      document.body.classList.add('distorted');
      const btn = document.getElementById('clickButton');
      if (btn) {
        btn.textContent = 'Click (system lagging...)';
      }
    }

    function startBreakdownEffects() {
      document.body.classList.add('breakdown');
      createNewsWindow();
    }

    function populateFinalTicket(rating) {
        // åŸºäºå½“å‰äº¤äº’çŠ¶æ€åŠ¨æ€è®¡ç®—æ‰€æœ‰æ•°å­—
        const totalMm      = clickCount * mmPerClick;
        const grossPay     = clickCount * PAY_PER_CLICK;          // æ€»äº§å‡º
        const deductions   = penaltyCount * DEDUCTION_PER_PENALTY; // ç½šæ¬¾æ€»é¢
        const netPay       = grossPay - deductions;               // å®é™…åˆ°æ‰‹ï¼ˆå¯ä»¥ä¸ºè´Ÿï¼‰
        const itemsReviewed = clickCount * 5; // æ¯æ¬¡ç‚¹å‡»å¯¹åº”å¤šå°‘â€œé¡¹ç›®â€ï¼Œä½ å¯ä»¥æ”¹æˆåˆ«çš„å€ç‡

        const idleTimeStr  = formatMsToHHMMSS(totalIdleMs);
        const emotional    = 'HIGH';
        const trauma       = '0.73';

        const ticket = `
   
========================================

                RECEIVED   

========================================

Worker ID:          0429-7561-KN
Session:            08:00â€“12:00

----------------------------------------
Items Reviewed:     ${formatNumber(itemsReviewed)}
Clicks Logged:      ${formatNumber(clickCount)}
Key Travel:         ${totalMm.toFixed(1)} mm
Idle Time:          ${idleTimeStr}
Deductions Applied: $${deductions.toFixed(2)}
Emotional Exposure: ${emotional}
Trauma Index:       ${trauma}
Payment Issued:     $${netPay.toFixed(2)}
----------------------------------------
Status:             ${rating}
----------------------------------------

This receipt confirms the collection of 
unseen human labor required by AI systems.
Every click counts.

========================================
        `.trim();

        // â—è¿™é‡Œä¸å†ç›´æ¥å†™å…¥ DOMï¼Œåªè¿”å›æ–‡æœ¬ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšâ€œæ‰“å­—æœºâ€åŠ¨ç”»
        return ticket;
    }

        // ä¸€è¡Œä¸€è¡Œâ€œæ‰“å°â€å°ç¥¨çš„åŠ¨ç”» + æ’­æ”¾æ‰“å°æœºéŸ³æ•ˆ + é€æ¸æ’‘å¤§çª—å£
    function animateReceipt(ticketText) {
      const pre         = document.getElementById('finalTicketText');
      const finalWindow = document.querySelector('.final-window');
      if (!pre || !finalWindow) return;

      pre.textContent = '';

      const lines      = ticketText.split('\n');
      const baseHeight = 220;  // åˆå§‹çª—å£é«˜åº¦ï¼ˆè¦å’Œ CSS å¼€å¤´å¤§è‡´å¯¹åº”ï¼‰
      const perLine    = 8;    // æ¯å¤šä¸€è¡Œå¤§æ¦‚åŠ å¤šå°‘ pxï¼Œä½ å¯ä»¥ä¹‹åå¾®è°ƒ

      let i = 0;

      // å¼€å§‹æ’­æ”¾æ‰“å°ç¥¨éŸ³æ•ˆ
      if (receiptSound) {
        receiptSound.currentTime = 0;
        receiptSound.play().catch(() => {});
      }

      // å…ˆè®¾ç½®ä¸€ä¸ªèµ·å§‹é«˜åº¦
      finalWindow.style.height = baseHeight + 'px';

      function step() {
        if (i >= lines.length) {
          // æ’­åˆ°æœ€åå¯ä»¥è®©å£°éŸ³å†å¤šå“ä¸€ä¼šå„¿å†åœ
          if (receiptSound) {
            setTimeout(() => {
              try { receiptSound.pause(); } catch (e) {}
            }, 200);
          }
          return;
        }

        // è¿½åŠ ä¸€è¡Œæ–‡æœ¬
        pre.textContent += (i > 0 ? '\n' : '') + lines[i];
        i++;

        // é€æ¸å¢åŠ çª—å£é«˜åº¦ï¼ˆåŠ ä¸€ä¸ªä¸Šé™ï¼Œåˆ«è¶…å‡ºå±å¹•ï¼‰
        const targetHeight = Math.min(
          baseHeight + perLine * i * 2,   // *2 è®©å¢é•¿å¿«ä¸€ç‚¹ï¼Œä½ å¯ä»¥æ”¹
          window.innerHeight * 0.8
        );
        finalWindow.style.height = targetHeight + 'px';

        // æ§åˆ¶æ‰“å°èŠ‚å¥ï¼šæ•°å­—è¶Šå°è¶Šå¿«ï¼Œ60â€“100ms ä¹‹é—´éƒ½å¯ä»¥
        setTimeout(step, 70);
      }

      step();
    }


        function showFinalReport() {
        const finalOverlay = document.getElementById('finalOverlay');
        const clicksSpan   = document.getElementById('finalClicks');
        const mmSpan       = document.getElementById('finalMm');
        const paySpan      = document.getElementById('finalPay');
        const ratingSpan   = document.getElementById('finalRating');
        const btn          = document.getElementById('clickButton');
        const titleEl      = document.getElementById('finalReceiptTitle');
        const barcode      = document.querySelector('.final-ticket-barcode');

        const totalMm  = clickCount * mmPerClick;
        const grossPay = clickCount * PAY_PER_CLICK;

        // æ—§çš„å° summaryï¼ˆå¦‚æœä½ æœ‰è¿™äº› spanï¼Œå°±é¡ºä¾¿æ›´æ–°ï¼‰
        if (clicksSpan) clicksSpan.textContent = clickCount;
        if (mmSpan)     mmSpan.textContent     = totalMm.toFixed(1) + ' mm';
        if (paySpan)    paySpan.textContent    = '$' + grossPay.toFixed(2);

        // çŠ¶æ€æ ¹æ® penalty æ•°é‡æ¥å®š
        let rating = 'BELOW TARGET';
        if (penaltyCount === 0) rating = 'EXCELLENT';
        else if (penaltyCount <= 2) rating = 'SATISFACTORY';

        if (ratingSpan) ratingSpan.textContent = rating;

        if (titleEl) {
          titleEl.textContent = 'Receipt';
        }
        if (barcode) {
          barcode.style.display = 'flex';
        }

        // å…ˆç”Ÿæˆå®Œæ•´ç¥¨æ®æ–‡æœ¬ï¼ˆä½†ä¸ç›´æ¥æ˜¾ç¤ºï¼‰
        const ticketText = populateFinalTicket(rating);

        // ä¿å­˜è¿™ä¸€ç­çš„ç¥¨æ®åˆ° historyï¼ˆç»™â€œView Historyâ€ç”¨ï¼‰
        saveReceiptToHistory(ticketText);

        // æ‰“å¼€ overlayï¼Œå†å¼€å§‹åšâ€œæ‰“å°åŠ¨ç”»â€
        if (finalOverlay) finalOverlay.style.display = 'flex';

        // ç¡®ä¿é¢„è®¾æ–‡æœ¬æ˜¯ç©ºçš„ï¼Œä»ç©ºç™½å¼€å§‹æ‰“å°
        const ticketPre = document.getElementById('finalTicketText');
        if (ticketPre) {
          ticketPre.textContent = '';
        }

        // å¼€å§‹è¡Œ-by-è¡Œçš„æ‰“å° + æ’‘å¤§çª—å£ + æ’­æ”¾å°ç¥¨éŸ³æ•ˆ
        animateReceipt(ticketText);

        if (btn) {
            btn.disabled = true;
            btn.textContent = 'Shift complete';
        }
    }

    
function resetShift() {
  // é€»è¾‘çŠ¶æ€
  clickCount               = 0;
  isDistorted              = false;
  breakdownStarted         = false;
  taskCompleted            = false;
  penaltyCount             = 0;
  totalIdleMs              = 0;
  idleStartMs              = null;
  newsOpened               = 0;
  breakdownClicksSinceNews = 0;
  breakdownClicksTotal     = 0;
  hasStarted               = false;
  lastActiveTime           = Date.now();

  // è§†è§‰çŠ¶æ€ï¼šå…¨å±€æ ·å¼
  document.body.classList.remove('distorted','distorted-full','breakdown', 'shift-started');

  // âœ… æŠŠæ‰€æœ‰å·²ç»ç”Ÿæˆçš„ç½šæ¬¾çª— / æ–°é—»çª—åˆ æ‰ï¼ˆä¿ç•™æ¨¡æ¿ï¼‰
  document.querySelectorAll('.penalty-window').forEach(win => {
    // æ¨¡æ¿æœ¬èº«æœ‰ penalty-template / news-templateï¼Œè¦ä¿ç•™
    if (
      win.classList.contains('penalty-template') ||
      win.classList.contains('news-template')
    ) {
      return;
    }
    win.remove();
  });

  // âœ… ç¡®ä¿ idle é»‘å¹•ä¹Ÿå…³æ‰
  hideIdleOverlay();

  // ä¸»çª—å£ UI æ¢å¤
  clickCountEl.textContent = '0';
  if (heightMmEl) {
    heightMmEl.textContent = '0.0 mm';
  }

  // æŠŠçº¸å¸¦æ‹‰å›èµ·å§‹ä½ç½®
  recalcBaseOffset();
  paperStrip.style.transform = `translate(-50%, ${baseOffsetPx}px)`;

  // æŒ‰é’®æ¢å¤
  const btn = document.getElementById('clickButton');
  if (btn) {
    btn.disabled   = true;                 // å†æ¬¡éœ€è¦æ‰“å¡æ‰èƒ½å¼€å§‹
    btn.textContent = 'Click to add 0.1 mm';
  }

  // âœ… é‡ç½®æ‰“å¡å¡ç‰‡ï¼šæ‹‰å›æœºå™¨ä¸Šæ–¹ + æé«˜ z-index + å»æ‰ä¹‹å‰çš„åŠ¨ç”»
  if (punchCard) {
    punchCard.style.zIndex    = '4';      // æ¯” machineFront(3) é«˜ï¼Œè¿™æ ·ç‚¹å¾—åˆ°å®ƒ
    punchCard.style.animation = 'none';   // æ¸…æ‰ä¸Šæ¬¡çš„ bounce åŠ¨ç”»
    punchCard.style.left      = '';       // å…ˆæ¸…ç©ºï¼Œé¿å…æ®‹ç•™
    punchCard.style.top       = '';
    // ç­‰æµè§ˆå™¨ layout ä¸€ä¸‹å†é‡æ–°æ”¾ç½®åˆ°æœºå™¨ä¸Šæ–¹
    setTimeout(placeCardAboveMachine, 30);
  }

  // é‡æ–°å‡ºç°æ‰“å¡å¼€åœº
  if (startOverlay) {
    startOverlay.classList.remove('is-hidden');
  }
}



function renderHistory() {
  const el = document.getElementById('finalTicketText');
  const titleEl = document.getElementById('finalReceiptTitle');

  if (titleEl) {
    titleEl.textContent = 'Receipt History';
  }
  if (!el) return;

  // è¿›å…¥ History è§†å›¾æ—¶ï¼ŒæŠŠæ¡ç åŒºåŸŸè—èµ·æ¥
  const barcode = document.querySelector('.final-ticket-barcode');
  if (barcode) {
    barcode.style.display = 'none';
  }


  if (!shiftHistory.length) {
    el.textContent = 'No previous shifts.\n\nComplete a shift to store its receipt.';
    return;
  }

  // è½¬ä¹‰ ticket æ–‡æœ¬é‡Œçš„ç‰¹æ®Šå­—ç¬¦ï¼Œé¿å…è¢«å½“ HTML
  const escape = (str) =>
    String(str)
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');

  const parts = shiftHistory.map((entry, idx) => {
    const t = new Date(entry.time);
    const label = `#${idx + 1}  ${t.toLocaleString()}`; // æ¯ä¸€æ¡çš„â€œæ¬¡æ•°+æ—¶é—´æˆ³â€
    const safeTicket = escape(entry.ticket);

    // âœ… æ¯ä¸€ä¸ª label éƒ½å±…ä¸­åŠ ç²— + ä¸¤ä¾§åŠ æ¨ªçº¿
    return (
      `<span class="history-highlight">--------${escape(label)}--------</span>\n` +
      safeTicket
    );
  });

  const html = parts.join(
    '\n\n----------------------------------------\n\n'
  );

  // ç”¨ innerHTMLï¼Œè¿™æ · span çš„æ ·å¼æ‰ä¼šç”Ÿæ•ˆ
  el.innerHTML = html;
}


// ------ Final window: èœå•æŒ‰é’® + ä¸‹æ‹‰é€»è¾‘ ------
const finalOverlay      = document.getElementById('finalOverlay');
const finalMenuButton   = document.getElementById('finalMenuButton');
const finalMenuDropdown = document.getElementById('finalMenuDropdown');

if (finalMenuButton && finalMenuDropdown) {
  // ç‚¹å‡» â‹¯ åˆ‡æ¢ä¸‹æ‹‰èœå•
  finalMenuButton.addEventListener('click', (e) => {
    e.stopPropagation();
    const willOpen = !finalMenuDropdown.classList.contains('is-open');
    finalMenuDropdown.classList.toggle('is-open', willOpen);
    finalMenuButton.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
  });

  // ç‚¹å‡»èœå•é¡¹
  finalMenuDropdown.addEventListener('click', (e) => {
    e.stopPropagation();
    const btn = e.target.closest('button[data-action]');
    if (!btn) return;

    const action = btn.dataset.action;
    // å…³é—­èœå•
    finalMenuDropdown.classList.remove('is-open');
    finalMenuButton.setAttribute('aria-expanded', 'false');

    if (action === 'newShift') {
      // å…³æ‰å½“å‰ç¥¨æ®çª— + å¼€æ–°ä¸€ç­
      if (finalOverlay) finalOverlay.style.display = 'none';
      resetShift();
    } else if (action === 'history') {
      // åˆ‡æ¢åˆ°å†å²è§†å›¾
      renderHistory();
    }
  });

  // ç‚¹å‡»çª—å£å…¶ä»–åœ°æ–¹æ—¶æ”¶èµ·èœå•
  document.addEventListener('click', () => {
    if (!finalMenuDropdown.classList.contains('is-open')) return;
    finalMenuDropdown.classList.remove('is-open');
    finalMenuButton.setAttribute('aria-expanded', 'false');
  });
}




    function addClick() {
      if (!hasStarted || taskCompleted) return;

      clickCount++;

      if (isDistorted) {
        setTimeout(updateStrip, DISTORTION_DELAY_MS);
      } else {
        updateStrip();
      }

      resetIdleTimer();

      if (clickCount >= DISTORTION_CLICKS && !isDistorted) {
        isDistorted = true;
        startDistortionEffects();
      }

      if (
        isDistorted &&
        !document.body.classList.contains('distorted-full') &&
        clickCount >= DISTORTION_CLICKS + 40   // ä½ å¯ä»¥æ ¹æ®æ„Ÿè§‰è°ƒæ•´ 40
    ) {
        document.body.classList.add('distorted-full');
    }

      if (isDistorted &&
          !breakdownStarted &&
          clickCount >= DISTORTION_CLICKS + BREAKDOWN_OFFSET_CLICKS) {
        breakdownStarted = true;
        startBreakdownEffects();
      }

      if (breakdownStarted && !taskCompleted) {
        breakdownClicksSinceNews++;
        breakdownClicksTotal++;

        let interval;
        if (breakdownClicksTotal < 12) {
          interval = 4;
        } else if (breakdownClicksTotal < 28) {
          interval = 2;
        } else {
          interval = 1;
        }

        if (breakdownClicksSinceNews >= interval) {
          createNewsWindow();
          breakdownClicksSinceNews = 0;
        }
      }

      // å½“ breakdown ç‚¹å‡»ç´¯è®¡åˆ°ä¸€å®šé‡åï¼Œè¿›å…¥æ›´ç³Šçš„â€œdeep breakdownâ€
      if (
        breakdownStarted &&
        breakdownClicksTotal > 22 &&                // é˜ˆå€¼å¯ä»¥è‡ªå·±è°ƒ
        !document.body.classList.contains('breakdown-deep')
      ) {
        document.body.classList.add('breakdown-deep');
      }


      if (clickCount >= TASK_TOTAL_CLICKS && !taskCompleted) {
        taskCompleted = true;
        showFinalReport();
      }
    }

    document.getElementById('clickButton').addEventListener('click', (e) => {
      e.stopPropagation();
      addClick();
    });
    document.querySelector('.strip-viewport').addEventListener('click', () => {
      addClick();
    });


    /* ---------- æ‰“å¡æœºæ‹–æ‹½é€»è¾‘ ---------- */
    const startOverlay = document.getElementById('startOverlay');
    const punchCard = document.getElementById('punchCard');
    const machineFront = document.getElementById('machineFront');
    const clickBtn = document.getElementById('clickButton');
    const punchSound   = document.getElementById('punchSound');
    const receiptSound = document.getElementById('receiptSound');


    function startShift() {
      if (hasStarted) return;
      hasStarted = true;
      lastActiveTime = Date.now();
      if (clickBtn) clickBtn.disabled = false;
      document.body.classList.add('shift-started');
      if (startOverlay) {
        startOverlay.classList.add('is-hidden');
      }
    }

    // æŠŠå¡ç‰‡æ‘†åˆ°æœºå™¨æ­£ä¸Šæ–¹
    function placeCardAboveMachine() {
      if (!punchCard || !machineFront) return;

      // å…ˆè®©æµè§ˆå™¨ç¡®è®¤å›¾ç‰‡å°ºå¯¸
      const cardRect = punchCard.getBoundingClientRect();
      const machineRect = machineFront.getBoundingClientRect();

      const cardWidth  = cardRect.width  || (window.innerWidth * 0.7);
      const cardHeight = cardRect.height || (window.innerHeight * 0.15);

      const targetLeft = machineRect.left + (machineRect.width - cardWidth) / 2;
      const targetTop  = machineRect.top - cardHeight * 0.4;

      punchCard.style.left = `${targetLeft}px`;
      punchCard.style.top  = `${targetTop}px`;
    }

    function setupIntroDrag() {
      if (!punchCard || !machineFront) return;

      let dragging = false;
      let offsetX = 0;
      let offsetY = 0;

      punchCard.addEventListener('mousedown', (e) => {
        e.preventDefault();
        dragging = true;
        const rect = punchCard.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
        // ğŸ‘‰ å¼€å§‹æ‹–æ‹½æ—¶ï¼Œè®©åœºæ™¯æ”¾å¤§ä¸€ç‚¹
        document.body.classList.add('intro-zoom');
      });

      document.addEventListener('mousemove', (e) => {
        if (!dragging) return;
        punchCard.style.left = (e.clientX - offsetX) + 'px';
        punchCard.style.top  = (e.clientY - offsetY) + 'px';
      });

      document.addEventListener('mouseup', () => {
        if (!dragging) return;
        dragging = false;
        checkDrop();
        // ğŸ‘‰ æ¾æ‰‹åï¼Œå¦‚æœè¿˜æ²¡çœŸæ­£æ‰“å¡æˆåŠŸï¼Œå¯ä»¥æŠŠæ”¾å¤§å…³æ‰
        if (!hasStarted) {
         document.body.classList.remove('intro-zoom');
        }
      });

      function checkDrop() {
        const cardRect    = punchCard.getBoundingClientRect();
        const machineRect = machineFront.getBoundingClientRect();
        const cardCenterX = cardRect.left + cardRect.width / 2;
        const cardCenterY = cardRect.top  + cardRect.height / 2;

        const slotCenterX = machineRect.left + machineRect.width * 0.5;
        const slotCenterY = machineRect.top  + machineRect.height * 0.32;
        const slotRadiusX = machineRect.width * 0.18;
        const slotRadiusY = machineRect.height * 0.12;

        const inSlot =
          Math.abs(cardCenterX - slotCenterX) < slotRadiusX &&
          Math.abs(cardCenterY - slotCenterY) < slotRadiusY;

        if (inSlot) {
          const targetLeft = slotCenterX - cardRect.width / 2;
          const targetTop  = slotCenterY - cardRect.height * 0.1;

          punchCard.style.left = targetLeft + 'px';
          punchCard.style.top  = targetTop + 'px';

          punchCard.style.zIndex   = 2; // åœ¨ front ä¸‹æ–¹ï¼ˆfront æ˜¯ 3ï¼‰
          punchCard.style.animation = 'card-bounce-in 0.8s ease-out';

          // ğŸ‘‡ æ‰“å¡æˆåŠŸæ—¶æ’­æ”¾éŸ³æ•ˆ
          if (punchSound) {
            punchSound.currentTime = 0;
            punchSound.play().catch(() => {
              // æŸäº›æµè§ˆå™¨å¯èƒ½é™éŸ³å¤±è´¥ï¼Œå¿½ç•¥é”™è¯¯å³å¯
            });
          }

          setTimeout(() => {
            startShift();
          }, 260);
        }
      }

    }

    /* ------------------ å¯åŠ¨ ------------------ */
    window.addEventListener('load', () => {
      initFacts();
      initRulers();
      updateStrip();

      setupIntroDrag();
      // è®©æµè§ˆå™¨å…ˆ layout ä¸€ä¸‹å†å±…ä¸­å¡ç‰‡ï¼Œé¿å…å®½é«˜ä¸º 0
      setTimeout(placeCardAboveMachine, 30);
    });

    window.addEventListener('resize', () => {
      recalcBaseOffset();
      updateStrip();
      if (idleOverlay.classList.contains('visible')) {
        fitIdleTimer();
      }
      placeCardAboveMachine();
    });
  </script>

    <!-- SVG filterï¼šè®© strip åœ¨æ·±åº¦ breakdown æ—¶åƒåœ¨æ°´/å¢¨é‡Œè¢«æ‹–æ‹½ -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <filter id="ink-distort">
      <!-- å™ªå£°åœº -->
      <feTurbulence type="fractalNoise"
                    baseFrequency="0.01 0.08"
                    numOctaves="2"
                    seed="3"
                    result="noise"/>
      <!-- æŠŠå™ªå£°è½¬æˆä½ç§» -->
      <feDisplacementMap in="SourceGraphic"
                         in2="noise"
                         scale="3"
                         xChannelSelector="R"
                         yChannelSelector="G" />
    </filter>
  </svg>
</body>
</html>
